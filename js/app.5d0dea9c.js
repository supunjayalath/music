(function(){"use strict";var e={9999:function(e,t,o){var a=o(9242),n=o(530),s=o.n(n),r=e=>{e.beforeEach(((e,t,o)=>{s().start(),o()})),e.afterEach(s().done)},i=o(3396);function l(e,t,o,a,n,s){const r=(0,i.up)("the-header"),l=(0,i.up)("router-view"),d=(0,i.up)("auth-modal"),c=(0,i.up)("app-player");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(r),(0,i.Wm)(l,null,{default:(0,i.w5)((({Component:e})=>[((0,i.wg)(),(0,i.j4)((0,i.LL)(e)))])),_:1}),(0,i.Wm)(d),(0,i.Wm)(c)],64)}const d={id:"header",class:"bg-gray-700"},c={class:"container mx-auto flex justify-start items-center py-5 px-4"},u=(0,i.Uk)("Music"),m={class:"flex flex-grow items-center"},g={class:"flex flex-row mt-1"},p={key:0},h=(0,i.Uk)("Manage"),b=(0,i.Uk)("About");function _(e,t,o,n,s,r){const l=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("header",d,[(0,i._)("nav",c,[(0,i.Wm)(l,{"exact-active-class":"no-active",class:"text-white font-bold uppercase text-2xl mr-4",to:"/"},{default:(0,i.w5)((()=>[u])),_:1}),(0,i._)("div",m,[(0,i._)("ul",g,[r.userLoggedIn?((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i._)("li",null,[(0,i.Wm)(l,{class:"px-2 text-white",to:{name:"manage-router"}},{default:(0,i.w5)((()=>[h])),_:1})]),(0,i._)("li",null,[(0,i._)("a",{class:"px-2 text-white",onClick:t[1]||(t[1]=(0,a.iM)(((...e)=>r.logout&&r.logout(...e)),["prevent"])),href:"#"},"Logout")])],64)):((0,i.wg)(),(0,i.iD)("li",p,[(0,i._)("a",{class:"px-2 text-white",href:"#",onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>r.toggleAuthModal&&r.toggleAuthModal(...e)),["prevent"]))},"Login / Register")])),(0,i._)("li",null,[(0,i.Wm)(l,{class:"px-2 text-white",to:{name:"about-router"}},{default:(0,i.w5)((()=>[b])),_:1})])])])])])}var f={name:"Header",methods:{toggleAuthModal(){this.$store.commit("auth/toggleAuthModal")},logout(){this.$store.dispatch("auth/signout"),this.$router.replace({name:"home"})}},computed:{userLoggedIn(){return this.$store.getters["auth/userLoggedIn"]}}},w=o(89);const v=(0,w.Z)(f,[["render",_]]);var y=v,x=o(7139);const k={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},S=(0,i._)("div",{class:"fixed inset-0 transition-opacity"},[(0,i._)("div",{class:"absolute inset-0 bg-gray-800 opacity-75"})],-1),D=(0,i._)("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"â€‹",-1),M={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},C={class:"py-4 text-left px-6"},P={class:"flex justify-between items-center pb-4"},A=(0,i._)("p",{class:"text-2xl font-bold"},"Your Account",-1),W={class:"modal-close cursor-pointer z-50"},U={class:"flex flex-wrap mb-4"},q={class:"flex-auto text-center"},F={class:"flex-auto text-center"};function $(e,t,o,n,s,r){const l=(0,i.up)("login-form"),d=(0,i.up)("register-form");return(0,i.wg)(),(0,i.iD)("div",{class:(0,x.C_)(["fixed z-10 inset-0 overflow-y-auto",{hidden:!r.authModalShow}]),id:"modal"},[(0,i._)("div",k,[S,D,(0,i._)("div",M,[(0,i._)("div",C,[(0,i._)("div",P,[A,(0,i._)("div",W,[(0,i._)("i",{class:"fas fa-times",onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>r.toggleAuthModal&&r.toggleAuthModal(...e)),["prevent"]))})])]),(0,i._)("ul",U,[(0,i._)("li",q,[(0,i._)("a",{class:(0,x.C_)(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":"login"===s.tab,"hover:text-blue-600":"register"===s.tab}]),href:"#",onClick:t[1]||(t[1]=(0,a.iM)((e=>s.tab="login"),["prevent"]))},"Login",2)]),(0,i._)("li",F,[(0,i._)("a",{class:(0,x.C_)(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":"register"==s.tab,"hover:text-blue-600":"login"===s.tab}]),onClick:t[2]||(t[2]=(0,a.iM)((e=>s.tab="register"),["prevent"])),href:"#"},"Register",2)])]),(0,i.wy)((0,i.Wm)(l,null,null,512),[[a.F8,"login"==s.tab]]),(0,i.wy)((0,i.Wm)(d,null,null,512),[[a.F8,"register"==s.tab]])])])])],2)}const I={class:"mb-3"},E=(0,i._)("label",{for:"login_email",class:"inline-block mb-2 w-full"},"Email",-1),z={class:"mb-3"},H=(0,i._)("label",{for:"login_password",class:"inline-block mb-2 w-full"}," Password",-1),L=["disabled"];function j(e,t,o,a,n,s){const r=(0,i.up)("vee-field"),l=(0,i.up)("error-message"),d=(0,i.up)("vee-form");return(0,i.wg)(),(0,i.iD)("div",null,[n.login_show_alert?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,x.C_)(["text-white text-center font-bold p-5 mb-4",n.login_alert_varient])},(0,x.zw)(n.login_alert_msg),3)):(0,i.kq)("",!0),(0,i.Wm)(d,{"validation-schema":n.schema_login,onSubmit:s.login},{default:(0,i.w5)((()=>[(0,i._)("div",I,[E,(0,i.Wm)(r,{name:"login_email",type:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),(0,i.Wm)(l,{class:"text-red-600",name:"login_email"})]),(0,i._)("div",z,[H,(0,i.Wm)(r,{name:"login_password",type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"}),(0,i.Wm)(l,{class:"text-red-600",name:"login_password"})]),(0,i._)("button",{type:"submit",disabled:n.login_in_submission,class:"block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700"}," Submit ",8,L)])),_:1},8,["validation-schema","onSubmit"])])}var T={data(){return{schema_login:{login_email:"required|min:4|max:100|email",login_password:"required|min:5|max:100"},login_in_submission:!1,login_show_alert:!1,login_alert_varient:"bg-blue-500",login_alert_msg:"Please wait! We are loggi you in."}},methods:{async login(e){this.login_in_submission=!0,this.login_show_alert=!0,this.login_alert_varient="bg-blue-500",this.login_alert_msg="Please wait! We are loggi you in.";try{await this.$store.dispatch("auth/login",e)}catch(t){return console.log(t),this.login_in_submission=!1,this.login_alert_varient="bg-red-500",void(this.login_alert_msg="An unexpected error occured. Please. try again later. ")}this.login_alert_varient="bg-green-500",this.login_alert_msg="Success! Your are now login.",window.location.reload()}}};const Y=(0,w.Z)(T,[["render",j]]);var O=Y;const Z={class:"mb-3"},N=(0,i._)("label",{for:"name",class:"inline-block mb-2 w-full"}," Name",-1),B={class:"mb-3"},R=(0,i._)("label",{for:"email",class:"inline-block mb-2 w-full"}," Email",-1),G={class:"mb-3"},K=(0,i._)("label",{for:"age",class:"inline-block mb-2 w-full"}," Age",-1),V={class:"mb-3"},Q=(0,i._)("label",{for:"password",class:"inline-block mb-2 w-full"},"Password",-1),X={class:"mb-3"},J=(0,i._)("label",{for:"confirm_password",class:"inline-block mb-2 w-full"},"Confirm Password",-1),ee={class:"mb-3"},te=(0,i._)("label",{for:"country",class:"inline-block mb-2 w-full"},"Country",-1),oe=(0,i._)("option",{value:"USA"},"USA",-1),ae=(0,i._)("option",{value:"Mexico"},"Mexico",-1),ne=(0,i._)("option",{value:"Germany"},"Germany",-1),se=(0,i._)("option",{value:"lanka"},"Sri Lanka",-1),re={class:"mb-3 pl-6"},ie=(0,i._)("label",{for:"checkbox",class:"inline-block w-full"},"Accept terms of service",-1),le=["disabled"];function de(e,t,o,a,n,s){const r=(0,i.up)("vee-field"),l=(0,i.up)("error-message"),d=(0,i.up)("vee-form");return(0,i.wg)(),(0,i.iD)("div",null,[n.reg_show_alert?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,x.C_)(["text-white text-center font-bold p-5 mb-4",n.reg_alert_varient])},(0,x.zw)(n.reg_alert_msg),3)):(0,i.kq)("",!0),(0,i.Wm)(d,{"validation-schema":n.schema,onSubmit:s.register,"initial-values":n.userData},{default:(0,i.w5)((()=>[(0,i._)("div",Z,[N,(0,i.Wm)(r,{name:"name",type:"text",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Name"}),(0,i.Wm)(l,{class:"text-red-600",name:"name"})]),(0,i._)("div",B,[R,(0,i.Wm)(r,{name:"email",type:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),(0,i.Wm)(l,{class:"text-red-600",name:"email"})]),(0,i._)("div",G,[K,(0,i.Wm)(r,{name:"age",type:"number",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"}),(0,i.Wm)(l,{class:"text-red-600",name:"age"})]),(0,i._)("div",V,[Q,(0,i.Wm)(r,{name:"password",bails:!1},{default:(0,i.w5)((({field:e,errors:t})=>[(0,i._)("input",(0,i.dG)({type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"},e),null,16),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"text-red-600",key:e},(0,x.zw)(e),1)))),128))])),_:1})]),(0,i._)("div",X,[J,(0,i.Wm)(r,{name:"confirm_password",type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Confirm Password"}),(0,i.Wm)(l,{class:"text-red-600",name:"confirm_password"})]),(0,i._)("div",ee,[te,(0,i.Wm)(r,{as:"select",name:"country",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},{default:(0,i.w5)((()=>[oe,ae,ne,se])),_:1}),(0,i.Wm)(l,{class:"text-red-600",name:"country"})]),(0,i._)("div",re,[ie,(0,i.Wm)(r,{value:"1",name:"tos",type:"checkbox",class:"w-4 h-4 float-left -ml-6 mt-1 rounded"}),(0,i.Wm)(l,{class:"text-red-600 block",name:"tos"})]),(0,i._)("button",{type:"submit",disabled:n.reg_in_submission,class:"block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700"}," Submit ",8,le)])),_:1},8,["validation-schema","onSubmit","initial-values"])])}var ce={data(){return{schema:{name:"required|min:3|max:100",email:"required|min:8|max:100|email",age:"required|min_value:18|max_value:100",password:"required|min:5|max:100",confirm_password:"passwords_mismatch:@password",country:"required|country_excluded:lanka",tos:"required"},userData:{country:"USA"},reg_in_submission:!1,reg_show_alert:!1,reg_alert_varient:"bg-blue-500",reg_alert_msg:"Please wait! Your account is being created."}},methods:{async register(e){this.reg_in_submission=!0,this.reg_show_alert=!0,this.reg_alert_varient="bg-blue-500",this.reg_alert_msg="Please wait! Your accunt is being created.";try{await this.$store.dispatch("auth/resister",e)}catch(t){return console.log(t),this.reg_in_submission=!1,this.reg_alert_varient="bg-red-500",void(this.reg_alert_msg="An unexpected error occured. Please. try again later. ")}this.reg_in_submission=!1,this.reg_alert_varient="bg-green-500",this.reg_alert_msg="Success! Your accunt has been created.",window.location.reload()}}};const ue=(0,w.Z)(ce,[["render",de]]);var me=ue,ge={name:"Auth",components:{LoginForm:O,RegisterForm:me},data(){return{tab:"login"}},computed:{authModalShow(){return this.$store.getters["auth/authModalShow"]}},methods:{toggleAuthModal(){this.$store.commit("auth/toggleAuthModal")}}};const pe=(0,w.Z)(ge,[["render",$]]);var he=pe;const be={class:"fixed bottom-0 left-0 bg-white p-5 pb-4 text-left align-top w-full h-16"},_e={class:"relative"},fe={class:"float-left w-7 h-7 leading-3"},we={class:"float-left w-7 h-7 leading-3 text-gray-400 mt-0 text-lg w-14 ml-5 mt-1"},ve={class:"player-currenttime"},ye={class:"float-left w-7 h-7 leading-3 ml-7 mt-2 player-scrub"},xe={key:0,class:"absolute left-0 right-0 text-lg text-center mx-auto player-song-info"},ke={class:"song-title"},Se={class:"song-artist"},De=(0,i._)("i",{class:"fas fa-circle"},null,-1),Me=[De],Ce={class:"float-left w-7 h-7 leading-3 text-gray-400 mt-0 text-lg w-14 ml-8 mt-1"},Pe={class:"player-duration"};function Ae(e,t,o,n,s,r){return(0,i.wg)(),(0,i.iD)("div",be,[(0,i._)("div",_e,[(0,i._)("div",fe,[(0,i._)("button",{type:"button",onClick:t[0]||(t[0]=(0,a.iM)(((...t)=>e.toggleSong&&e.toggleSong(...t)),["prevent"]))},[(0,i._)("i",{class:(0,x.C_)(["fa text-gray-500 text-xl",{"fa-play":!e.playing,"fa-pause":e.playing}])},null,2)])]),(0,i._)("div",we,[(0,i._)("span",ve,(0,x.zw)(e.seek),1)]),(0,i._)("div",ye,[e.currentSong.modified_name?((0,i.wg)(),(0,i.iD)("div",xe,[(0,i._)("span",ke,(0,x.zw)(e.currentSong.modified_name),1),(0,i._)("span",Se,"(Uploaded by "+(0,x.zw)(e.currentSong.modified_name)+")",1)])):(0,i.kq)("",!0),(0,i._)("span",{onClick:t[1]||(t[1]=(0,a.iM)(((...t)=>e.updateSeek&&e.updateSeek(...t)),["prevent"])),class:"block w-full h-2 rounded m-1 mt-2 bg-gray-200 relative cursor-pointer"},[(0,i._)("span",{class:"absolute top-neg-8 text-gray-800 text-lg",style:(0,x.j5)({left:e.playerProgress})},Me,4),(0,i._)("span",{class:"block h-2 rounded bg-gradient-to-r from-green-500 to-green-400",style:(0,x.j5)({width:e.playerProgress})},null,4)])]),(0,i._)("div",Ce,[(0,i._)("span",Pe,(0,x.zw)(e.duration),1)])])])}var We=o(65),Ue={methods:{...(0,We.nv)("player",["toggleSong","updateSeek"])},computed:{...(0,We.Se)("player",["playing"]),...(0,We.rn)("player",["seek","duration","playerProgress","currentSong"])}};const qe=(0,w.Z)(Ue,[["render",Ae]]);var Fe=qe,$e={components:{TheHeader:y,AuthModal:he,AppPlayer:Fe},created(){this.$store.dispatch("auth/init_login")}};const Ie=(0,w.Z)($e,[["render",l]]);var Ee=Ie,ze=o(2483);const He=(0,i.uE)('<section class="mb-8 py-20 text-white text-center relative"><div class="absolute inset-0 w-full h-full bg-contain introduction-bg" style="background-image:url(assets/img/header.png);"></div><div class="container mx-auto"><div class="text-white main-header-content"><h1 class="font-bold text-5xl mb-5">Listen to Great Music!</h1><p class="w-full md:w-8/12 mx-auto"> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus et dolor mollis, congue augue non, venenatis elit. Nunc justo eros, suscipit ac aliquet imperdiet, venenatis et sapien. Duis sed magna pulvinar, fringilla lorem eget, ullamcorper urna. </p></div></div><img alt="back" class="relative block mx-auto mt-5 -mb-20 w-auto max-w-full" src="assets/img/introduction-music.png"></section>',1),Le={class:"container mx-auto"},je={class:"bg-white rounded border border-gray-200 relative flex flex-col"},Te={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},Ye=(0,i._)("span",{class:"card-title"},"Songs",-1),Oe=[Ye],Ze={id:"playlist"};function Ne(e,t,o,a,n,s){const r=(0,i.up)("song-item"),l=(0,i.Q2)("icon");return(0,i.wg)(),(0,i.iD)("div",null,[He,(0,i._)("section",Le,[(0,i._)("div",je,[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Te,Oe)),[[l,"headphones-alt",void 0,{right:!0,yellow:!0}]]),(0,i._)("ol",Ze,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.songs,(e=>((0,i.wg)(),(0,i.j4)(r,{song_item:e,key:e.docID},null,8,["song_item"])))),128))])])])])}var Be=o(4275);o(4059),o(2702),o(6287);const Re={apiKey:"AIzaSyBcEYnUN8vD_aQ56XysjAtB_yrerRF11vE",authDomain:"vue-http-demo-bc08a.firebaseapp.com",databaseURL:"https://vue-http-demo-bc08a-default-rtdb.firebaseio.com",projectId:"vue-http-demo-bc08a",storageBucket:"vue-http-demo-bc08a.appspot.com",messagingSenderId:"714596192420",appId:"1:714596192420:web:ddc44772ddfbbaccbd9631"};Be.Z.initializeApp(Re);const Ge=Be.Z.auth(),Ke=Be.Z.firestore(),Ve=Be.Z.storage(),Qe=Ke.collection("users"),Xe=Ke.collection("songs"),Je=Ke.collection("comments"),et={class:"flex justify-between items-center p-3 pl-6 cursor-pointer transition duration-300 hover:bg-gray-50"},tt={class:"text-gray-500 text-sm"},ot={class:"text-gray-600 text-lg"},at=["onClick"],nt=(0,i._)("i",{class:"fa fa-comments text-gray-600"},null,-1);function st(e,t,o,a,n,s){const r=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("li",et,[(0,i._)("div",null,[(0,i.Wm)(r,{to:{name:"song",params:{id:o.song_item.docID}},class:"font-bold block text-gray-600"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,x.zw)(o.song_item.modified_name),1)])),_:1},8,["to"]),(0,i._)("span",tt,(0,x.zw)(o.song_item.display_name),1)]),(0,i._)("div",ot,[(0,i.Wm)(r,{custom:"",to:{name:"song",params:{id:o.song_item.docID},hash:"#comments"}},{default:(0,i.w5)((({navigate:e})=>[(0,i._)("span",{class:"comments",onClick:e},[nt,(0,i.Uk)(" "+(0,x.zw)(o.song_item.comment_count),1)],8,at)])),_:1},8,["to"])])])}var rt={props:["song_item"]};const it=(0,w.Z)(rt,[["render",st]]);var lt=it,dt={components:{SongItem:lt},data(){return{songs:[],maxPerPage:3,pendingRequest:!1}},async created(){this.getSongs(),window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){const{scrollTop:e,offsetHeight:t}=document.documentElement,{innerHeight:o}=window,a=Math.round(e)+o===t;a&&this.getSongs()},async getSongs(){if(this.pendingRequest)return;let e;if(this.pendingRequest=!0,this.songs.length){const t=await Xe.doc(this.songs[this.songs.length-1].docID).get();e=await Xe.orderBy("modified_name").startAfter(t).limit(this.maxPerPage).get()}else e=await Xe.orderBy("modified_name").limit(this.maxPerPage).get();e.forEach((e=>{const t={...e.data(),docID:e.id};this.songs.push(t)})),this.pendingRequest=!1}}};const ct=(0,w.Z)(dt,[["render",Ne]]);var ut=ct;function mt(e,t){return(0,i.wg)(),(0,i.iD)("h1",null,"About Page")}const gt={},pt=(0,w.Z)(gt,[["render",mt]]);var ht=pt;const bt={class:"container mx-auto mt-6"},_t={class:"md:grid md:grid-cols-3 md:gap-4"},ft={class:"col-span-1"},wt={class:"col-span-2"},vt={class:"bg-white rounded border border-gray-200 relative flex flex-col"},yt=(0,i._)("div",{class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},[(0,i._)("span",{class:"card-title"},"My Songs"),(0,i._)("i",{class:"fa fa-compact-disc float-right text-green-400 text-2xl"})],-1),xt={class:"p-6"};function kt(e,t,o,a,n,s){const r=(0,i.up)("upload"),l=(0,i.up)("composition-item");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("section",bt,[(0,i._)("div",_t,[(0,i._)("div",ft,[(0,i.Wm)(r,{ref:"upload",addSong:s.addSong},null,8,["addSong"])]),(0,i._)("div",wt,[(0,i._)("div",vt,[yt,(0,i._)("div",xt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.songs,((e,t)=>((0,i.wg)(),(0,i.j4)(l,{updateSong:s.updateSong,song:e,key:e.docID,index:t,removeSong:s.removeSong,updateUnsavedFlag:s.updateUnsavedFlag},null,8,["updateSong","song","index","removeSong","updateUnsavedFlag"])))),128))])])])])])])}const St={class:"bg-white rounded border border-gray-200 relative flex flex-col"},Dt=(0,i._)("div",{class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},[(0,i._)("span",{class:"card-title"},"Upload"),(0,i._)("i",{class:"fas fa-upload float-right text-green-400 text-2xl"})],-1),Mt={class:"p-6"},Ct=(0,i._)("h5",null,"Drop your files here",-1),Pt=[Ct],At=(0,i._)("hr",{class:"my-6"},null,-1),Wt={class:"flex h-4 overflow-hidden bg-gray-200 rounded"};function Ut(e,t,o,n,s,r){return(0,i.wg)(),(0,i.iD)("div",St,[Dt,(0,i._)("div",Mt,[(0,i._)("div",{class:(0,x.C_)(["w-full px-10 py-20 rounded text-center cursor-pointer border border-dashed border-gray-400 text-gray-400 transition duration-500 hover:text-white hover:bg-green-400 hover:border-green-400 hover:border-solid",{"bg-green-400 border-green-400 border-solid":s.is_dragover}]),onDrag:t[0]||(t[0]=(0,a.iM)((()=>{}),["prevent","stop"])),onDragstart:t[1]||(t[1]=(0,a.iM)((()=>{}),["prevent","stop"])),onDragend:t[2]||(t[2]=(0,a.iM)((e=>s.is_dragover=!1),["prevent","stop"])),onDragover:t[3]||(t[3]=(0,a.iM)((e=>s.is_dragover=!0),["prevent","stop"])),onDragenter:t[4]||(t[4]=(0,a.iM)((e=>s.is_dragover=!0),["prevent","stop"])),onDragleave:t[5]||(t[5]=(0,a.iM)((e=>s.is_dragover=!1),["prevent","stop"])),onDrop:t[6]||(t[6]=(0,a.iM)((e=>r.upload(e)),["prevent","stop"]))},Pt,34),(0,i._)("input",{type:"file",multiple:"",onChange:t[7]||(t[7]=e=>r.upload(e))},null,32),At,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.uploads,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"mb-4",key:e.name},[(0,i._)("div",{class:(0,x.C_)(["font-bold text-sm",e.text_class])},[(0,i._)("i",{class:(0,x.C_)(e.icon)},null,2),(0,i.Uk)(" "+(0,x.zw)(e.name),1)],2),(0,i._)("div",Wt,[(0,i._)("div",{class:(0,x.C_)(["transition-all progress-bar bg-blue-400",e.varient]),style:(0,x.j5)({width:e.current_preogress+"%"})},null,6)])])))),128))])])}var qt={name:"upload",data(){return{is_dragover:!1,uploads:[]}},props:{addSong:{type:Function,required:!0}},methods:{upload(e){this.is_dragover=!1;const t=e.dataTransfer?[...e.dataTransfer.files]:[...e.target.files];t.forEach((e=>{if("audio/mpeg"!==e.type)return void console.log(e);const t=Ve.ref(),o=t.child(`songs/${e.name}`),a=o.put(e),n=this.uploads.push({task:a,current_preogress:0,name:e.name,varient:"bg-blue-400",icon:"fas fa-spinner fa-spin",text_class:""})-1;a.on("state_changed",(e=>{const t=e.bytesTransferred/e.totalBytes*100;this.uploads[n].current_preogress=t}),(e=>{this.uploads[n].varient="bg-red-400",this.uploads[n].icon="fas fa-times",this.uploads[n].text_class="text-red-400",console.log(e)}),(async()=>{const e={uid:Ge.currentUser.uid,display_name:Ge.currentUser.displayName,original_name:a.snapshot.ref.name,modified_name:a.snapshot.ref.name,genre:"",comment_count:0,url:null};e.url=await a.snapshot.ref.getDownloadURL();const t=await Xe.add(e),o=await t.get();this.addSong(o),this.uploads[n].varient="bg-green-400",this.uploads[n].icon="fas fa-check",this.uploads[n].text_class="text-green-400"}))}))},cancelUploads(){this.uploads.forEach((e=>{e.task.cancel()}))}},beforeUnmount(){this.uploads.forEach((e=>{e.task.cancel()}))}};const Ft=(0,w.Z)(qt,[["render",Ut]]);var $t=Ft;const It={class:"border border-gray-200 p-3 mb-4 rounded"},Et={class:"inline-block text-2xl font-bold"},zt=(0,i._)("i",{class:"fa fa-times"},null,-1),Ht=[zt],Lt=(0,i._)("i",{class:"fa fa-pencil-alt"},null,-1),jt=[Lt],Tt={class:"mb-3"},Yt={class:"inline-block mb-2"},Ot={class:"mb-3"},Zt=(0,i._)("label",{class:"inline-block mb-2"},"Genre",-1),Nt=["disabled"],Bt=["disabled"];function Rt(e,t,o,n,s,r){const l=(0,i.up)("vee-field"),d=(0,i.up)("error-message"),c=(0,i.up)("vee-form");return(0,i.wg)(),(0,i.iD)("div",It,[(0,i.wy)((0,i._)("div",null,[(0,i._)("h4",Et,(0,x.zw)(o.song.modified_name),1),(0,i._)("button",{onClick:t[0]||(t[0]=(0,a.iM)(((...e)=>r.deleteSong&&r.deleteSong(...e)),["prevent"])),class:"ml-1 py-1 px-2 text-sm rounded text-white bg-red-600 float-right"},Ht),(0,i._)("button",{onClick:t[1]||(t[1]=(0,a.iM)((e=>s.showForm=!s.showForm),["prevent"])),class:"ml-1 py-1 px-2 text-sm rounded text-white bg-blue-600 float-right"},jt)],512),[[a.F8,!s.showForm]]),(0,i.wy)((0,i._)("div",null,[s.show_alert?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,x.C_)(["text-white text-center font-bold p-5 mb-4",s.alert_varient])},(0,x.zw)(s.alert_message),3)):(0,i.kq)("",!0),(0,i.Wm)(c,{"validation-schema":s.schema,"initial-values":o.song,onSubmit:r.edit},{default:(0,i.w5)((()=>[(0,i._)("div",Tt,[(0,i._)("label",Yt,(0,x.zw)(o.song.modified_name),1),(0,i.Wm)(l,{type:"text",name:"modified_name",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Song Title",onInput:t[2]||(t[2]=e=>o.updateUnsavedFlag(!0))}),(0,i.Wm)(d,{class:"text-red-600",name:"modified_name"})]),(0,i._)("div",Ot,[Zt,(0,i.Wm)(l,{name:"genre",type:"text",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Genre",onInput:t[3]||(t[3]=e=>o.updateUnsavedFlag(!0))}),(0,i.Wm)(d,{class:"text-red-600",name:"genre"})]),(0,i._)("button",{disabled:s.in_submission,type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600"}," Submit ",8,Nt),(0,i._)("button",{disabled:s.in_submission,onClick:t[4]||(t[4]=(0,a.iM)((e=>s.showForm=!s.showForm),["prevent"])),type:"button",class:"py-1.5 px-3 rounded text-white bg-gray-600"}," Go Back ",8,Bt)])),_:1},8,["validation-schema","initial-values","onSubmit"])],512),[[a.F8,s.showForm]])])}var Gt={props:{song:{type:Object,required:!0},index:{type:Number,required:!0},updateSong:{required:!0,type:Function},removeSong:{required:!0,type:Function},updateUnsavedFlag:{type:Function}},data(){return{showForm:!1,schema:{modified_name:"required",genre:"required"},in_submission:!1,show_alert:!1,alert_varient:"bg-blue-500",alert_message:"Please wait! Updating song info."}},methods:{async edit(e){this.in_submission=!0,this.show_alert=!0,this.alert_varient="bg-blue-500",this.alert_message="Please wait! Updating song info.",console.log(e);try{await Xe.doc(this.song.docID).update(e)}catch(t){console.log(t),this.in_submission=!1,this.alert_varient="bg-red-500",this.alert_message="An unexpected error occured. Please. try again later. "}this.in_submission=!1,this.alert_varient="bg-green-500",this.alert_message="Success! Song has been updated.",this.updateSong(this.index,e),this.updateUnsavedFlag(!1)},async deleteSong(){const e=Ve.ref(),t=e.child(`songs/${this.song.original_name}`);await t.delete(),await Xe.doc(this.song.docID).delete(),this.removeSong(this.index)}}};const Kt=(0,w.Z)(Gt,[["render",Rt]]);var Vt=Kt,Qt={name:"Manage",components:{Upload:$t,CompositionItem:Vt},data(){return{songs:[],unsavedFlag:!1}},async created(){console.log(Ge.currentUser.uid);const e=await Xe.where("uid","==",Ge.currentUser.uid).get();e.forEach(this.addSong),console.log(Ge.currentUser.uid),console.log(e)},methods:{updateSong(e,t){this.songs[e].modified_name=t.modified_name,this.songs[e].genre=t.genre},removeSong(e){this.songs.splice(e,1)},addSong(e){const t={...e.data(),docID:e.id};this.songs.push(t)},updateUnsavedFlag(e){this.unsavedFlag=e}}};const Xt=(0,w.Z)(Qt,[["render",kt]]);var Jt=Xt;const eo={class:"w-full mb-8 py-14 text-center text-white relative"},to=(0,i._)("div",{class:"absolute inset-0 w-full h-full box-border bg-contain music-bg",style:{"background-image":"url(/assets/img/song-header.png)"}},null,-1),oo={class:"container mx-auto flex items-center"},ao=(0,i._)("i",{class:"fas fa-play"},null,-1),no=[ao],so={class:"z-50 text-left ml-8"},ro={class:"text-3xl font-bold"},io={class:"container mx-auto mt-6",id:"comments"},lo={class:"bg-white rounded border border-gray-200 relative flex flex-col"},co={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},uo={class:"card-title"},mo=(0,i._)("i",{class:"fa fa-comments float-right text-green-400 text-2xl"},null,-1),go={class:"p-6"},po=["disabled"],ho=(0,i._)("option",{value:"1"},"Latest",-1),bo=(0,i._)("option",{value:"2"},"Oldest",-1),_o=[ho,bo],fo={class:"container mx-auto"},wo={class:"mb-5"},vo={class:"font-bold"};function yo(e,t,o,n,s,r){const l=(0,i.up)("vee-field"),d=(0,i.up)("error-message"),c=(0,i.up)("vee-form");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("section",eo,[to,(0,i._)("div",oo,[(0,i._)("button",{type:"button",onClick:t[0]||(t[0]=(0,a.iM)((t=>e.newSong(s.song)),["prevent"])),class:"z-50 h-24 w-24 text-3xl bg-white text-black rounded-full focus:outline-none"},no),(0,i._)("div",so,[(0,i._)("div",ro,(0,x.zw)(s.song.modified_name),1),(0,i._)("div",null,(0,x.zw)(s.song.genre),1)])])]),(0,i._)("section",io,[(0,i._)("div",lo,[(0,i._)("div",co,[(0,i._)("span",uo,"Comments ("+(0,x.zw)(s.song.comment_count)+")",1),mo]),(0,i._)("div",go,[s.comment_show_alert?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,x.C_)(["text-white text-center font-bold p-5 mb-4",s.comment_alert_varient])},(0,x.zw)(s.comment_alert_msg),3)):(0,i.kq)("",!0),e.userLoggedIn?((0,i.wg)(),(0,i.j4)(c,{key:1,"validation-schema":s.schema_comment,onSubmit:r.commentStore},{default:(0,i.w5)((()=>[(0,i.Wm)(l,{as:"textarea",name:"comment",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded mb-4",placeholder:"Your comment here..."}),(0,i.Wm)(d,{class:"text-red-600",name:"comment"}),(0,i._)("button",{disabled:s.comment_in_submission,type:"submit",class:"py-1.5 px-3 rounded text-white bg-green-600 block"}," Submit ",8,po)])),_:1},8,["validation-schema","onSubmit"])):(0,i.kq)("",!0),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.sort=e),class:"block mt-4 py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},_o,512),[[a.bM,s.sort]])])])]),(0,i._)("ul",fo,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortedComments,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.docID,class:"p-6 bg-gray-50 border border-gray-200"},[(0,i._)("div",wo,[(0,i._)("div",vo,(0,x.zw)(e.name),1),(0,i._)("time",null,(0,x.zw)(e.dataPosted),1)]),(0,i._)("p",null,(0,x.zw)(e.content),1)])))),128))])])}var xo={data(){return{song:{},comments:[],schema_comment:{comment:"required|min:3"},comment_in_submission:!1,comment_show_alert:!1,comment_alert_varient:"bg-blue-500",comment_alert_msg:"Please wait! Your comment is being submitted.",sort:1}},async created(){const e=await Xe.doc(this.$route.params.id).get();if(!e.exists)return void this.$router.push({name:"home"});const{sort:t}=this.$route.query;this.sort="1"===t||"2"===t?t:"1",this.song=e.data(),this.getComments()},methods:{...(0,We.nv)(["player","newSong"]),async commentStore(e,{resetForm:t}){this.comment_in_submission=!0,this.comment_show_alert=!0,this.comment_alert_varient="bg-blue-500",this.comment_alert_msg="Please wait! Your comment is being submitted.";const o={content:e.comment,dataPosted:(new Date).toString(),sid:this.$route.params.id,name:Ge.currentUser.displayName,uid:Ge.currentUser.uid};await Je.add(o),this.comment_in_submission=!1,this.comment_alert_varient="bg-green-500",this.comment_alert_msg="Comment added!",t(),this.song.comment_count+=1,await Xe.doc(this.$route.params.id).update({comment_count:this.song.comment_count}),this.getComments()},async getComments(){const e=await Je.where("sid","==",this.$route.params.id).get();this.comments=[],e.forEach((e=>{const t={...e.data(),docID:e.id};this.comments.push(t)}))}},computed:{...(0,We.rn)("auth",["userLoggedIn"]),sortedComments(){return this.comments.slice().sort(((e,t)=>"1"===this.sort?new Date(t.dataPosted)-new Date(e.dataPosted):new Date(e.dataPosted)-new Date(t.dataPosted)))}},watch:{sort(e){e!==this.$route.query.sort&&this.$router.push({query:{sort:e}})}}};const ko=(0,w.Z)(xo,[["render",yo]]);var So=ko;const Do=[{path:"/:catchAll(.*)*",name:"404error",redirect:{name:"home"}},{path:"/",component:ut,name:"home"},{path:"/about",component:ht,name:"about-router"},{path:"/manage",component:Jt,name:"manage-router",meta:{requiresAuth:!0}},{path:"/song/:id",name:"song",component:So}],Mo=(0,ze.p7)({history:(0,ze.PO)("/"),routes:Do,linkExactActiveClass:"text-yellow-500"});var Co=Mo,Po={namespaced:!0,state:{authModalShow:!1,userLoggedIn:!1},getters:{authModalShow(e){return e.authModalShow},userLoggedIn(e){return e.userLoggedIn}},mutations:{toggleAuthModal(e){e.authModalShow=!e.authModalShow,console.log(e.authModalShow)},toggleAuth(e){e.userLoggedIn=!e.userLoggedIn}},actions:{async resister(e,t){const o=await Ge.createUserWithEmailAndPassword(t.email,t.password);await Qe.doc(o.user.uid).set({name:t.name,email:t.email,age:t.age,country:t.country}),o.user.updateProfile({displayName:t.name}),e.commit("toggleAuth")},async login(e,t){await Ge.signInWithEmailAndPassword(t.login_email,t.login_password),e.commit("toggleAuth")},init_login(e){const t=Ge.currentUser;t&&e.commit("toggleAuth")},async signout(e){await Ge.signOut(),e.commit("toggleAuth")}}},Ao=o(2005),Wo={formtTime(e){const t=Math.floor(e/60)||0,o=Math.round(e-60*t||0);return`${t}: ${o<10?"0":""}${o}`}},Uo={namespaced:!0,state:{currentSong:{},sound:{},seek:"00:00",duration:"00:00",playerProgress:"0%"},getters:{authModalShow(e){return e.authModalShow},playing:e=>!!e.sound.playing&&e.sound.playing()},mutations:{newSong(e,t){e.currentSong=t,e.sound=new Ao.Howl({src:[t.url],html5:!0})},updatePosition(e){e.seek=Wo.formtTime(e.sound.seek()),e.duration=Wo.formtTime(e.sound.duration()),e.playerProgress=e.sound.seek()/e.sound.duration()*100+"%"}},actions:{async newSong({commit:e,state:t},o){t.sound instanceof Ao.Howl&&t.sound.unload(),e("newSong",o),t.sound.play(),t.sound.on("play",(()=>{requestAnimationFrame((()=>{this.dispatch("progress")}))}))},async toggleSong({state:e}){e.sound.playing&&(e.sound.playing()?e.sound.pause():e.sound.play())},progress({commit:e,state:t,dispatch:o}){e("updatePosition"),t.sound.playing()&&requestAnimationFrame((()=>{o("progress")}))},updateSeek({state:e,dispatch:t},o){if(!e.sound.playing)return;const{x:a,width:n}=o.currentTarget.getBoundingClientRect(),s=o.clientX-a,r=s/n,i=e.sound.duration()*r;e.sound.seek(i),e.sound.once("seek",(()=>{t("progress")}))}}},qo=(0,We.MT)({modules:{auth:Po,player:Uo}}),Fo=o(5708),$o=o(3990),Io={install(e){e.component("VeeForm",Fo.l0),e.component("VeeField",Fo.gN),e.component("ErrorMessage",Fo.Bc),(0,Fo.aH)("required",$o.C1),(0,Fo.aH)("min",$o.VV),(0,Fo.aH)("max",$o.Fp),(0,Fo.aH)("alphaSpaces",$o.Kj),(0,Fo.aH)("email",$o.Do),(0,Fo.aH)("min_value",$o.Gd),(0,Fo.aH)("max_value",$o.JC),(0,Fo.aH)("passwords_mismatch",$o.GU),(0,Fo.aH)("excluded",$o.Y2),(0,Fo.aH)("country_excluded",$o.Y2),(0,Fo.aH)("tos",$o.C1),(0,Fo.jQ)({generateMessage(e){const t={required:`The field ${e.field} is required.`,min:`The field ${e.field} is too short.`,max:`The field ${e.field} is too long.`,alpha_spaces:`The field ${e.field} may only contain alphabetical characters and spaces.`,email:`The field ${e.field} must be a valid email.`,min_value:`The field ${e.field} is too low.`,max_value:`The field ${e.field} is too high.`,excluded:`You are not allowed to use this value for the field ${e.field}.`,country_excluded:"Due to restrictions, we do not accept users from this location.",passwords_mismatch:"The password don't match.",tos:"You mus accept the term of service."},o=t[e.rule.name]?t[e.rule.name]:`The field ${e.field} is invalid.`;return o},validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0})}},Eo={beforeMount(e,t){let o=`fa fa-${t.value} float-right text-green-400 text-xl`;"full"===t.arg&&(o=t.value),t.modifiers.right&&(o+=" float-right "),t.modifiers.yellow&&(o+=" text-yellow-400 "),e.innerHTML+=`<i class="${o}"></i>`}},zo=o(5431);let Ho;(0,zo.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),r(Co),Ge.onAuthStateChanged((()=>{Ho||(Ho=(0,a.ri)(Ee),Ho.use(qo),Ho.use(Co),Ho.use(Io),Ho.directive("icon",Eo),Ho.mount("#app"))}))}},t={};function o(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,a,n,s){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],s=e[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(i=!1,s<r&&(r=s));if(i){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,n,s]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,s,r=a[0],i=a[1],l=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);if(l)var c=l(o)}for(t&&t(a);d<r.length;d++)s=r[d],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(c)},a=self["webpackChunknew_music_app"]=self["webpackChunknew_music_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[998],(function(){return o(9999)}));a=o.O(a)})();
//# sourceMappingURL=app.5d0dea9c.js.map